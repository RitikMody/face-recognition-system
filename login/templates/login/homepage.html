{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,300,400,500,700,900" rel="stylesheet">

    <title>Home</title>

    <link rel="stylesheet" type="text/css" href="{%static 'login/assets/css/bootstrap.min.css' %}">

    <link rel="stylesheet" type="text/css" href="{% static 'login/assets/css/font-awesome.css' %}">

    <link rel="stylesheet" href="{% static 'login/assets/css/templatemo-softy-pinko.css' %}">

    <script>
    
    function update(id,app_name,email){
          document.getElementById("userid").value = id;
          document.getElementById("appname_update").value = app_name;
          document.getElementById("email_update").value = email;
        }
        function delete_record(id,app_name, email){
          document.getElementById("user_d").value= id;
          document.getElementById("appname_d").innerHTML = app_name;
          document.getElementById("email_d").innerHTML = email;
        }
        function logout(email){
            console.log(email);
            document.getElementById("user_session").value=email;
            console.log(document.getElementById("user_session"));
        }
        function view(id){
            console.log(id);
            document.getElementById("user_id_view").value = id;
        }
    </script>
</head>


<body>

    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->

    {% if tab == 1 %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
    $(document).ready(function () {
        // Handler for .ready() called.
        $('html, body').animate({
            scrollTop: $('#view').offset().top
        }, 'slow');
    });
    </script>
    {% endif %}
    

    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <!-- <a href="#" class="logo">
                            <img src="assets/images/logo.png" alt="Softy Pinko" />
                        </a> -->
                        <a href="#welcome" class="logo" style="color: black;">
                            Password Manager
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <!-- hi {{ request.session.email }} -->
                            <li><a href="#welcome" >Home</a></li>
                            <li><a href="#add">Add</a></li>
                            <li><a href="#view">View Passwords</a></li>
                            <li><a role="button" onclick="return logout('{{ request.session.email }}')" data-toggle="modal" data-target="#Modal2" style="text-decoration:none;" >Logout</a></li>
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <!-- ***** Welcome Area Start ***** -->
    <div class="welcome-area" id="welcome">

        <!-- ***** Header Text Start ***** -->
        <div class="header-text">
            <div class="container">
                <div class="row">
                    <div class="offset-xl-3 col-xl-6 offset-lg-2 col-lg-8 col-md-12 col-sm-12">
                        <h1>TRUST US !!</h1>
                        <h1> Store all your important passwords at one safe place.</h1>
                    </div>
                </div>
            </div>
        </div>
        <!-- ***** Header Text End ***** -->
    </div>
    <!-- ***** Welcome Area End ***** -->


    <!-- ***** Add Item Start ***** -->
    <section class="section padding-top-70 padding-bottom-0" id="add">
        <div class="container">
            <!-- ***** Section Title Start ***** -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="center-heading">
                        <h2 class="section-title">Add Your Passwords</h2>
                    </div>
                </div>
                <div class="offset-lg-3 col-lg-6">
                    <div class="center-text">
                        <p>No need to remember all your passwords.</p>
                    </div>
                </div>
            </div>
            <!-- ***** Section Title End ***** -->

            <div class="row">
                <!-- ***** Contact Text Start ***** -->
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <h5 class="margin-bottom-30">Trust us!!</h5>
                    <div class="contact-text">
                        <p>Just fill the form and keep your passwords secured.</p>
                    </div>
                </div>
                <!-- ***** Contact Text End ***** -->

                <!-- ***** Contact Form Start ***** -->
                <div class="col-lg-8 col-md-6 col-sm-12">
                    <div class="contact-form">
                        <form method="POST">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <fieldset>
                                        <input name="name" type="text" class="form-control" id="name"
                                            placeholder="Application Name" required="">
                                    </fieldset>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <fieldset>
                                        <input name="email" type="email" class="form-control" id="email"
                                            placeholder="E-Mail/Username" required="">
                                    </fieldset>
                                </div>
                                <div class="col-lg-12">
                                    <fieldset>
                                        <input name="password" rows="6" class="form-control" id="password"
                                            placeholder="Password" required=""></input>
                                    </fieldset>
                                </div>
                                <div class="col-lg-12">
                                    <fieldset>
                                        <button type="submit" name ="form_submit" id="form_submit" class="main-button">Submit</button>
                                    </fieldset>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- ***** Contact Form End ***** -->
            </div>
        </div>
    </section>
    <!-- ***** add Item End ***** -->

    <!-- ***** view password Start ***** -->
    <section class="section colored" id="view">
        <div class="container">
            <!-- ***** Section Title Start ***** -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="center-heading">
                        <h2 class="section-title">Your Passwords</h2>
                    </div>
                </div>
                <div class="offset-lg-3 col-lg-6">
                    <div class="center-text">
                        <p>View all your passwords at one place..</p>
                    </div>
                </div>
            </div>
            <!-- ***** Section Title End ***** -->

            <div class="row">
                <!-- ***** Pricing Item Start ***** -->
                {% for obj in obj %}
                <div class="col-lg-4 col-md-6 col-sm-12"
                    data-scroll-reveal="enter bottom move 50px over 0.6s after 0.2s">
                    <div class="pricing-item">
                        <div class="pricing-body">
                            <div class="price-wrapper">
                                <span class="currency">{{ obj.app_name}} </span>
                            </div>
                            <ul class="list">
                                <li class="active">Username/Email: {{ obj.app_email }}</li>
                            </ul>
                        </div>
                        <div class="pricing-footer">
                            <a role="button" onclick="return update('{{obj.id}}','{{obj.app_name}}','{{obj.app_email}}')" data-toggle="modal" data-target="#Modal3" class="main-button">Update</a>
                            <a role="button" onclick="return view('{{obj.id}}')" data-toggle="modal" data-target="#Modal1" class="main-button">View</a>
                            <a role="button" onclick="return delete_record('{{obj.id}}','{{obj.app_name}}','{{obj.app_email}}')" data-toggle="modal" data-target="#Modal4" class="main-button">Delete</a>
                        </div>
                    </div>
                </div>
                {% endfor %}

                <!-- ***** Pricing Item End ***** -->
            </div>
        </div>
    </section>
    <!-- ***** view passwords End ***** -->


    <!-- ***** Footer Start ***** -->
    <footer>
    
            <div class="row">
                <div class="col-lg-12">
                    <p class="copyright">Copyright &copy; 2021 By Hetvi Kothari, Ritik Mody and Ayush Khade</p>
                </div>
            </div>
        </div>
    </footer>
  <!-- Modal For Update -->

  <div class="modal fade" id="Modal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 28%;">Update Account Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-left: 0;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" method="POST" name="myform">
                    {% csrf_token %}

                    <input type="number" value="0" id="userid" name="userid" style="visibility: hidden;">

                    <div class="form-group row">
                        <label for="fname" class="col-sm-3 col-3 text-right control-label col-form-label">Application Name<span style="color: red;">*</span></label>
                        <div class="col-sm-9 col-9">
                            <input type="text" class="form-control" id="appname_update" placeholder="Enter the first name here" name="appname_update" required="True">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="email" class="col-sm-3 col-3 text-right control-label col-form-label">Username/<br>Email<span style="color: red;">*</span></label>
                        <div class="col-sm-9 col-9">
                            <input type="email" class="form-control" id="email_update" placeholder="Enter the Email ID here" name="email_update" required="True">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="email" class="col-sm-3 col-3 text-right control-label col-form-label">Password</label>
                        <div class="col-sm-9 col-9">
                            <input type="password" class="form-control" id="password_update" placeholder="Enter new password if updated" name="password" >
                        </div>
                    </div>                    

                   

                  <div class="row pt-3" style="text-align: center;">
                      <div class="col-md-2 offset-md-4 col-3 offset-2" style="margin-right: 25px;">
                    <button type="submit" class="btn btn-primary" name="update" style="margin-right: 10px !important;">Update</button></div>
                    <div class="col-md-2 col-3">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  </div>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>


 <!-- Modal for Deletion -->

 <div class="modal fade" id="Modal4" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 35%;">Delete Record</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-left: 0;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <p style="text-align: center;">Are you sure you want to delete this account record?</p>
            <div class="modal-body">
                <form class="form-horizontal" method="POST" name="myform">
                    {% csrf_token %}
                    <input type="number"  id="user_d" name="user_d" style="visibility: hidden;">
                    
                   
                    <div class="content" style="text-align: center;">
                        <b>Application Name: </b><span id="appname_d"></span> <br>
                        <b>Email ID: </b><span id="email_d"></span><br>
                      </div>

            <div class="row pt-3" style="text-align: center;">
                <div class="col-md-2 offset-md-4 col-3 offset-2" style="margin-right: 25px;">
              <button type="submit" class="btn btn-danger" name="delete" style="margin-right: 10px !important;">Remove</button></div>
              <div class="col-md-2 col-3">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
          </form>
            </div>
        </div>
    </div>
</div>
 <!-- Modal for View -->

 <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 35%;">View Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-left: 0;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <p style="text-align: center;">Do you want the password to be sent to the registered email?</p>
            <div class="modal-body">
                <form class="form-horizontal" method="POST" name="myform">
                    {% csrf_token %}
                    <input type="text"  id="user_id_view" name="user_id_view" style="visibility: hidden;">
                    

            <div class="row pt-3" style="text-align: center;">
                <div class="col-md-2 offset-md-4 col-3 offset-2" style="margin-right: 25px;">
              <button type="submit" class="btn btn-danger" name="view" style="margin-right: 10px !important;">Yes</button></div>
              <div class="col-md-2 col-3">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            </div>
          </div>
          </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Logout -->

<div class="modal fade" id="Modal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 43%;">Logout</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-left: 0;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <p style="text-align: center;">Are you sure you want to logout?</p>
            <div class="modal-body">
                <form class="form-horizontal" method="POST" name="myform">
                    {% csrf_token %}
                    <input type="text"  id="user_session" name="user_session" style="visibility: hidden;">
                    

            <div class="row pt-3" style="text-align: center;">
                <div class="col-md-2 offset-md-4 col-3 offset-2" style="margin-right: 25px;">
              <button type="submit" class="btn btn-danger" name="signout" style="margin-right: 10px !important;">Yes</button></div>
              <div class="col-md-2 col-3">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            </div>
          </div>
          </form>
            </div>
        </div>
    </div>
</div>
    <!-- jQuery -->
    <script src="{%static 'login/assets/js/jquery-2.1.0.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{%static 'login/assets/js/popper.js' %}"></script>
    <script src="{%static 'login/assets/js/bootstrap.min.js' %}"></script>

    <!-- Plugins -->
    <script src="{%static 'login/assets/js/scrollreveal.min.js' %}"></script>
    <script src="{%static 'login/assets/js/waypoints.min.js' %}"></script>
    <script src="{%static 'login/assets/js/jquery.counterup.min.js' %}"></script>
    <script src="{%static 'login/assets/js/imgfix.min.js' %}"></script>

    <!-- Global Init -->
    <script src="{%static 'login/assets/js/custom.js' %}"></script>

</body>

</html>